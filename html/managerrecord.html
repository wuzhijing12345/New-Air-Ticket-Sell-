<html>
<head>
    <meta charset="utf-8">
    <title>消费记录查看界面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入 Bootstrap -->
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .header ul{
            list-style-type: none;
            margin:0px;
            padding:0px;
        }
        .header li {
            float:left;
            margin: 10px;
        }
    </style>
    <script type="text/javascript" src="../js/jquery-easyui-1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="../js/jquery-easyui-1.8.1/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../js/jquery-easyui-1.8.1/locale/easyui-lang-zh_CN.js"></script>
</head>
<body>
<div class="header">
    <ul>
        <li><button id="goflight" class="btn btn-primary">航班管理</button></li>
        <li><button id="golog" class="btn btn-primary">日志文件</button></li>
        <li><button id="logout" class="btn btn-primary">退出登录</button></li>
    </ul>
</div>
<div class="row clearfix">
    <div class="col-md-12 column">
        <table class="table table-hover table-striped">
            <thead>
            <tr>
                <th>交易记录编号</th>
                <th>交易类型</th>
                <th>账户号</th>
                <th>航班号</th>
            </tr>
            </thead>
            <tbody id="t1">

            </tbody>
        </table>
    </div>
</div>
<script>
    window.onload=function (){
        var str={};
        $.ajax({
            url : "http://localhost:8080/flight/showrecord",
            type : "post",
            contentType:'application/json;charset=utf-8',
            dataType:'json',
            data: JSON.stringify(str),
            success : function(datas) {
                $str = '';
                $.each(datas.recordlist,function(i,val){
                    $str = $str + '<tr>';
                    $str = $str + '<td>'+val.recordId+'  </td>';
                    if(val.retype==1){
                        $str = $str + '<td>购票</td>';
                    }
                    else if(val.retype==2){
                        $str = $str + '<td>退票</td>';
                    }
                    else{
                        $str = $str + '<td>改签</td>';
                    }
                    $str = $str + '<td>'+val.reuserId+'  </td>';
                    $str = $str + '<td>'+val.reflightId+'  </td>';
                    $str = $str + '</tr>';
                });
                $('#t1').append($str);
            }
        });
    }
</script>
<script type="text/javascript">
    $("#logout").click(function() {
        var userId = sessionStorage.getItem("userId");
        var str={
            "userId" : userId
        };
        /* ajax请求 */
        $.ajax({
            url : "http://localhost:8080/flight/logout",
            type : "post",
            contentType:'application/json;charset=utf-8',
            dataType:'json',
            data: JSON.stringify(str),
            success : function(datas) {
                window.location.href = "login.html";
            }
        });
    })
</script>
<script type="text/javascript">
    $("#goflight").click(function() {
        window.location.href = "managerf.html";
    })
</script>
<script type="text/javascript">
    $("#golog").click(function() {
        window.location.href = "managerlog.html";
    })
</script>
</body>
</html>
